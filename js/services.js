var snServices=angular.module("snServices",["ngStorage"]);snServices.factory("User",["$http","$localStorage",function(e,t){function n(){var n,o=t.user;return void 0!==o&&e.get(r+"users/"+o.id+"/").then(function(e){n=angular.extend(o,e.data)},function(){alert("Error!")}),n}var r="http://not.only.20cm.me/api/",o=n();return{query:function(t,n){e.get(r+"users/",{}).success(t).error(n)},queryUser:function(t,n,o){return e.get(r+"users/"+t+"/").then(n,o)},queryUserTopics:function(t,n,o,u){e.get(r+"topics/?author="+t+"&page="+n+"/").then(o,u)},save:function(t,n,o){e.post(r+"users/",t).then(n,o)},signin:function(t,n,o){e.post(r+"users/obtain_auth_token/",t).success(n).error(o)},logout:function(e){delete t.user,e()},getCurrentUser:function(){return n()},me:function(t,n){return o!=={}?e.get(r+"/users/"+o.id+"/",{}).success(t).error(n):void n()}}}]).factory("Topic",["$http","$localStorage",function(e,t){var n="http://not.only.20cm.me/api/";return{query:function(t,r,o){e.get(n+"topics/",{page:t}).then(r,o)},view:function(t,r,o){e.get(n+"topics/"+t+"/",{}).then(r,o)},viewById:function(t,r,o){e.get(n+"topics/"+q+"/",{}).then(function(t){e.get(n+"replies/"+q+"/").then(function(e){})},o)},viewBySlug:function(e,t,n){},getReplies:function(t,r,o,u){r="undefined"!=typeof r?r:1,e({method:"GET",url:n+"replies/?topic="+t+"&page="+r}).then(o,u)},createReply:function(t,r,o,u){e({method:"POST",url:n+"replies/",data:{content:t,topic:r}}).then(o,u)},createTopic:function(t,r,o,u){r="undefined"!=typeof r?r:[],e({method:"POST",url:n+"topics/",data:{title:t,tags:r}}).then(o,u)}}}]);